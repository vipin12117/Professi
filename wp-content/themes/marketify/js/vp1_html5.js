/*
 * HTML5 Video Player with Multiple Skins v4.0
 *
 * Copyright 2012-2013, LambertGroup
 * 
*/

(function(c){c.fn.vp1_html5_Video=function(a){var d,F,G,q=!1,H,I,J,u,y,K,L,M,N,O,v,P,k,l,s=0;a=c.extend({skin:"futuristicElectricBlue",initialVolume:1,showInfo:!0,seekBarAdjust:255,movieTitle:"",movieDesc:"",responsive:!1,responsiveRelativeToBrowser:!1,width:0,height:0,width100Proc:!1,height100Proc:!1,autoHideControllers:!0,origWidth:0,origHeight:0,setOrigWidthHeight:!0,windowOrientationScreenSize0:0,windowOrientationScreenSize90:0,windowOrientationScreenSize_90:0,windowCurOrientation:0},a);return this.each(function(){var e= c(this);d=e.attr("id");var m=navigator.userAgent.toLowerCase(),f=c('<div class="VideoControls"><a class="VideoRewind" title="Rewind"></a><a class="VideoPlay" title="Play/Pause"></a><div class="VideoBuffer"></div><div class="VideoSeek"></div><a class="VideoInfoBut" title="Info"></a><div class="VideoTimer">00:00</div><div class="VolumeAll"><div class="VolumeSlider"></div><a class="VolumeButton" title="Mute/Unmute"></a></div><a class="VideoFullScreen" title="FullScreen"></a></div> <div class="VideoInfoBox"><div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div></div></div></div>'), b=e.parent(".vp1_html5");b.attr("id","html5videoid"+Math.floor(1E5*Math.random()));b.addClass(a.skin);b.append(f);var f=c(".VideoControls",b),g=c(".VideoInfoBox",b),X=c(".VideoRewind",b),w=c(".VideoPlay",b),n=c(".VideoBuffer",b),h=c(".VideoSeek",b),Q=c(".VideoInfoBut",b);a.showInfo||Q.addClass("hideElement");var r=c(".VideoTimer",b),R=c(".VolumeAll",b),z=c(".VolumeSlider",b),t=c(".VolumeButton",b),p=c(".VideoFullScreen",b);h.css("width",document.getElementById(d).offsetWidth-a.seekBarAdjust+"px"); n.css("width",h.css("width"));g.css("width",document.getElementById(d).offsetWidth-40+"px");g.html('<p class="movieTitle">'+a.movieTitle+'</p><p class="movieDesc">'+a.movieDesc+"</p>");f.hide();X.click(function(){document.getElementById(d).currentTime=0;document.getElementById(d).play()});var A=function(){!1==document.getElementById(d).paused?document.getElementById(d).pause():document.getElementById(d).play()};w.click(A);e.click(A);e.bind("play",function(){w.addClass("VideoPause")});e.bind("pause", function(){w.removeClass("VideoPause")});e.bind("ended",function(){w.removeClass("VideoPause")});a.autoHideControllers&&(b.mouseover(function(){f.show()}),b.mouseout(function(){120>R.css("height").substring(0,R.css("height").length-2)&&f.hide()}));b.keydown(function(a){32==a.keyCode&&A()});var S=function(){q=!0;p.removeClass("VideoFullScreen");p.addClass("VideoFullScreenIn");c("body").css("overflow","hidden");c("body").css("margin",0);c(".vp1_html5").css("display","none");b.css("display","block"); e.css("position","fixed");e.css("width",window.innerWidth+"px");e.css("height",window.innerHeight+"px");e.css("top",0);e.css("left",0);b.css("position","fixed");b.css("width","100%");b.css("height","20000px");b.css("top",0);b.css("left",0);b.css("z-index",1E4);f.css("position","fixed");f.css("bottom",v);h.css("width",window.innerWidth-a.seekBarAdjust+"px");n.css("width",h.css("width"));g.css("width",window.innerWidth-40+"px");g.css("position","fixed")},T=function(){q=!1;p.removeClass("VideoFullScreenIn"); p.addClass("VideoFullScreen");c("body").css("margin",F);c("body").css("overflow",G);c(".vp1_html5").css("display","block");e.css("position",H);e.css("width",a.origWidth+"px");e.css("height",a.origHeight+"px");e.css("top",J);e.css("left",I);b.css("position",K);b.css("width",u+"px");b.css("height",y+"px");b.css("top",M);b.css("left",L);b.css("z-index",N);f.css("position",O);f.css("bottom",v);h.css("width",document.getElementById(d).offsetWidth-a.seekBarAdjust+"px");n.css("width",h.css("width"));g.css("width", u-40+"px");g.css("position",P)};b.dblclick(function(){q||p.click()});p.click(function(){screenfull.enabled?(screenfull.toggle(document.getElementById(b.attr("id"))),screenfull.onchange=function(a){setTimeout(function(){q?T():S()},50)}):(-1!=B||-1!=m.indexOf("ipad")||-1!=m.indexOf("iphone")||-1!=m.indexOf("ipod")||-1!=m.indexOf("webos"))&&a.responsive&&a.responsiveRelativeToBrowser&&a.width100Proc&&a.height100Proc||(q?T():S())});var C=!1;r.mouseover(function(){C=!0;k=document.getElementById(d).currentTime; l=document.getElementById(d).duration;r.text("-"+x(l-k))});r.mouseout(function(){C=!1;k=document.getElementById(d).currentTime;l=document.getElementById(d).duration;r.text(x(k))});var D=!1,U=function(){if(document.getElementById(d).readyState){l=document.getElementById(d).duration;h.slider({value:0,step:0.01,orientation:"horizontal",range:"min",max:l,animate:!0,slide:function(){D=!0},stop:function(a,b){D=!1;document.getElementById(d).currentTime=b.value}});var a=0;n.progressbar({value:a});e.bind("progress", function(){a=document.getElementById(d).buffered.end(document.getElementById(d).buffered.length-1);0<a&&n.progressbar({value:a*n.css("width").substring(0,n.css("width").length-2)/l})});f.show()}else setTimeout(U,200)};U();var x=function(a){var b=10>Math.floor(a/60)?"0"+Math.floor(a/60):Math.floor(a/60);return b+":"+(10>Math.floor(a-60*b)?"0"+Math.floor(a-60*b):Math.floor(a-60*b))};e.bind("timeupdate",function(){k=document.getElementById(d).currentTime;l=document.getElementById(d).duration;D||h.slider("value", k);C?r.text("-"+x(l-k)):r.text(x(k))});Q.click(function(){"giant"==a.skin?"none"==g.css("display")?g.fadeIn():g.fadeOut():g.slideToggle(300)});var V=1;z.slider({value:a.initialVolume,orientation:"vertical",range:"min",max:1,step:0.05,animate:!0,slide:function(a,b){document.getElementById(d).muted=!1;V=b.value;document.getElementById(d).volume=b.value}});document.getElementById(d).volume=a.initialVolume;t.click(function(){!0==document.getElementById(d).muted?(document.getElementById(d).muted=!1,z.slider("value", V),t.removeClass("VolumeButtonMute"),t.addClass("VolumeButton")):(document.getElementById(d).muted=!0,z.slider("value","0"),t.removeClass("VolumeButton"),t.addClass("VolumeButtonMute"))});e.removeAttr("controls");F=c("body").css("margin");G=c("body").css("overflow");a.origWidth=document.getElementById(d).offsetWidth;a.origHeight=document.getElementById(d).offsetHeight;a.width=a.origWidth;a.height=a.origHeight;H=e.css("position");I=e.css("left");J=e.css("top");u=b[0].offsetWidth;y=b[0].offsetHeight; K=b.css("position");L=b.css("left");M=b.css("top");N=b.css("z-index");O=f.css("position");v=f.css("bottom");P=g.css("position");a.responsive&&(a.width100Proc||a.height100Proc)&&(a.setOrigWidthHeight=!1);var B=function(){var a=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return parseInt(a,10)}(),W=function(){if(q)-1==m.indexOf("ipad")&&-1==m.indexOf("iphone")&&-1==m.indexOf("ipod")&&-1==m.indexOf("webos")|| p.click();else{responsiveWidth=b.parent().width();responsiveHeight=b.parent().height();a.responsiveRelativeToBrowser&&(responsiveWidth=c(window).width(),responsiveHeight=c(window).height());a.width100Proc&&(a.width=responsiveWidth-1);a.height100Proc&&(a.height=responsiveHeight);if(a.origWidth!=responsiveWidth||a.width100Proc)a.origWidth>responsiveWidth||a.width100Proc?a.width=responsiveWidth:a.width100Proc||(a.width=a.origWidth),a.height100Proc||(a.height=a.width*a.origHeight/a.origWidth),a.width= parseInt(a.width,10),a.height=parseInt(a.height,10);e.css("width",a.width+"px");e.css("height",a.height+"px");b.css("width",a.width+"px");b.css("height",a.height+"px");f.css("bottom",v);h.css("width",a.width-a.seekBarAdjust+"px");n.css("width",h.css("width"));g.css("width",a.width-40+"px");a.setOrigWidthHeight||(a.origWidth=a.width,a.origHeight=a.height,u=b[0].offsetWidth,y=b[0].offsetHeight)}},E=!1;c(window).resize(function(){doResizeNow=!0;-1!=navigator.userAgent.indexOf("Android")&&(0==a.windowOrientationScreenSize0&& 0==window.orientation&&(a.windowOrientationScreenSize0=c(window).width()),0==a.windowOrientationScreenSize90&&90==window.orientation&&(a.windowOrientationScreenSize90=c(window).height()),0==a.windowOrientationScreenSize_90&&-90==window.orientation&&(a.windowOrientationScreenSize_90=c(window).height()),a.windowOrientationScreenSize0&&(0==window.orientation&&c(window).width()>a.windowOrientationScreenSize0)&&(doResizeNow=!1),a.windowOrientationScreenSize90&&(90==window.orientation&&c(window).height()> a.windowOrientationScreenSize90)&&(doResizeNow=!1),a.windowOrientationScreenSize_90&&(-90==window.orientation&&c(window).height()>a.windowOrientationScreenSize_90)&&(doResizeNow=!1),0==s&&(doResizeNow=!1,s=c(window).width()));-1!=B&&(9==B&&0==s)&&(doResizeNow=!1);s==c(window).width()?(doResizeNow=!1,a.windowCurOrientation!=window.orientation&&-1!=navigator.userAgent.indexOf("Android")&&(a.windowCurOrientation=window.orientation,doResizeNow=!0)):s=c(window).width();a.responsive&&doResizeNow&&(!1!== E&&clearTimeout(E),E=setTimeout(function(){W()},300))});a.responsive&&W()})};c.fn.vp1_html5_Video.skins={}})(jQuery);